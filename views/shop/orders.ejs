<%- include('../includes/head.ejs') %>
    </head>

    <body>
        <%- include('../includes/navigation.ejs') %>
        <main>

          <% if (orders.length <= 0) { %>
          <h1>No Orders Yet.</h1>
     <% } else { %>
      <% orders.forEach(order => { %>
          <table class="table table-striped table-dark">
            <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Products</th>
                <th scope="col">Total</th>
                <th scope="col">Order Date</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row"><%= order.id %></th>
                <td>
                <ul>
                  <% order.products.forEach(product => { %>
                  <li><%= product.name %> (<%= product.orderItem.quantity %>)</li>
                  <% }); %>
                </ul>
              </td>
                <td>
                  <%
                  let total = 0;
                  order.products.forEach(product => { 
                    total += product.price
                    %>
                  <% }); %>
                  <%= total %>
              </td>

                <td>
                <%= moment(order.createdAt).format('MMM-DD-YYYY'); %>
              </td>
            </tr>
          </tbody>
        </table>
        <% }); %>
        <% } %>
         
             
            </main>
        <%- include('../includes/end.ejs') %>